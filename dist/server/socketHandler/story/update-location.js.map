{"version":3,"sources":["server/socketHandler/story/update-location.js"],"names":["updateLocationHandler","socket","on","userType","userObj","searchObj","riderId","_id","driverId","userID","UserSchema","findOneAndUpdateAsync","$set","gpsLoc","new","then","SocketStore","emitByUserId","updatedUser","TripRequestSchema","findOneAsync","$and","$or","tripRequestStatus","tripRequestObj","driverObj","changedTripRequestStatus","TripSchema","tripStatus","tripObj","error","e","dist","srcLoc","newTripRequestStatus","currentTripRequestStatus","toFixed","console","log","config","arrivedDistance","arrivingDistance","updatedTripRequestObj","updatedTripRequestObj123","message","data","err"],"mappings":"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","file":"update-location.js","sourceRoot":"../../../../../../.."}