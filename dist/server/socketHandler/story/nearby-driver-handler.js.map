{"version":3,"sources":["server/socketHandler/story/nearby-driver-handler.js"],"names":["nearbyDriverHandler","socket","on","coordinates","userRegion","region","latitude","longitude","userId","user","_id","console","log","UserSchema","findOneAndUpdateAsync","$set","mapCoordinates","new","then","findAsync","$and","gpsLoc","$geoWithin","$centerSphere","updatedUser","config","radius","currTripId","currTripState","loginStatus","userType","isAvailable","driverArray","length","SocketStore","emitByUserId"],"mappings":";;;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,SAASA,mBAAT,CAA6BC,MAA7B,EAAqC;AACnCA,SAAOC,EAAP,CAAU,oBAAV,EAAgC,sBAAc;AAC5C;AACA;AACA;AACA;AACA;AACA,QAAMC,cAAc,CAACC,WAAWC,MAAX,CAAkBC,QAAnB,EAA6BF,WAAWC,MAAX,CAAkBE,SAA/C,CAApB;AACA,QAAMC,SAASJ,WAAWK,IAAX,CAAgBC,GAA/B;AACAC,YAAQC,GAAR,CAAYJ,MAAZ;AACA;AACA;AACA;AACAK,mBAAWC,qBAAX,CAAiC,EAAEJ,KAAKF,MAAP,EAAjC,EAAkD,EAAEO,MAAM,EAAEC,gBAAgBb,WAAlB,EAAR,EAAlD,EAA6F,EAAEc,KAAK,IAAP,EAA7F,EACGC,IADH,CACQ;AAAA,aAAeL,eAAWM,SAAX,CAAqB,EAAEC,MAAM,CAAC,EAAEC,QAAQ,EAAEC,YAAY,EAAEC,eAAe,CAACC,YAAYR,cAAb,EAA6BS,cAAOC,MAApC,CAAjB,EAAd,EAAV,EAAD,EAA6F,EAAEC,YAAY,IAAd,EAAoBC,eAAe,IAAnC,EAA7F,EAAwI,EAAEC,aAAa,IAAf,EAAxI,EAA+J,EAAEC,UAAU,QAAZ,EAA/J,EAAuL,EAAEC,aAAa,IAAf,EAAvL,CAAR,EAArB,CAAf;AAAA,KADR,EAEGb,IAFH,CAEQ,uBAAe;AACnB,UAAIc,WAAJ,EAAiB;AACfrB,gBAAQC,GAAR,CAAYoB,YAAYC,MAAxB,EAAgC,aAAhC;AACAC,8BAAYC,YAAZ,CAAyB3B,MAAzB,EAAiC,mBAAjC,EAAsDwB,WAAtD;AACD;AACF,KAPH;AAQD,GApBD;AAqBD,C,CAzBwD;AAFzD;kBA4BehC,mB","file":"nearby-driver-handler.js","sourceRoot":"../../../../../../.."}