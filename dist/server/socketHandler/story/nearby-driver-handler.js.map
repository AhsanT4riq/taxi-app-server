{"version":3,"sources":["server/socketHandler/story/nearby-driver-handler.js"],"names":["nearbyDriverHandler","socket","on","coordinates","userRegion","region","latitude","longitude","userId","user","_id","console","log","findOneAndUpdateAsync","$set","mapCoordinates","new","then","findAsync","$and","gpsLoc","$geoWithin","$centerSphere","updatedUser","radius","currTripId","currTripState","loginStatus","userType","isAvailable","driverArray","length","emitByUserId"],"mappings":";;;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,SAASA,mBAAT,CAA6BC,MAA7B,EAAqC;AACnCA,SAAOC,EAAP,CAAU,oBAAV,EAAgC,sBAAc;AAC5C;AACA;AACA;AACA;AACA;AACA,QAAMC,cAAc,CAACC,WAAWC,MAAX,CAAkBC,QAAnB,EAA6BF,WAAWC,MAAX,CAAkBE,SAA/C,CAApB;AACA,QAAMC,SAASJ,WAAWK,IAAX,CAAgBC,GAA/B;AACAC,YAAQC,GAAR,CAAYJ,MAAZ;AACA;AACA;AACA;AACA,mBAAWK,qBAAX,CAAiC,EAAEH,KAAKF,MAAP,EAAjC,EAAkD,EAAEM,MAAM,EAAEC,gBAAgBZ,WAAlB,EAAR,EAAlD,EAA6F,EAAEa,KAAK,IAAP,EAA7F,EACGC,IADH,CACQ;AAAA,aAAe,eAAWC,SAAX,CAAqB,EAAEC,MAAM,CAAC,EAAEC,QAAQ,EAAEC,YAAY,EAAEC,eAAe,CAACC,YAAYR,cAAb,EAA6B,cAAOS,MAApC,CAAjB,EAAd,EAAV,EAAD,EAA6F,EAAEC,YAAY,IAAd,EAAoBC,eAAe,IAAnC,EAA7F,EAAwI,EAAEC,aAAa,IAAf,EAAxI,EAA+J,EAAEC,UAAU,QAAZ,EAA/J,EAAuL,EAAEC,aAAa,IAAf,EAAvL,CAAR,EAArB,CAAf;AAAA,KADR,EAEGZ,IAFH,CAEQ,uBAAe;AACnB,UAAIa,WAAJ,EAAiB;AACfnB,gBAAQC,GAAR,CAAYkB,YAAYC,MAAxB,EAAgC,aAAhC;AACA,8BAAYC,YAAZ,CAAyBxB,MAAzB,EAAiC,mBAAjC,EAAsDsB,WAAtD;AACD;AACF,KAPH;AAQD,GApBD;AAqBD,C,CAzBwD;AAFzD;kBA4Be9B,mB","file":"nearby-driver-handler.js","sourceRoot":"../../../../../../.."}