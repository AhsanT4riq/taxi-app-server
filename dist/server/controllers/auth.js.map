{"version":3,"sources":["server/controllers/auth.js"],"names":["loginadmin","req","res","next","UserSchema","findOneAsync","email","body","$or","userType","then","user","err","APIError","httpStatus","NOT_FOUND","comparePassword","password","passwordError","isMatch","UNAUTHORIZED","loginStatus","gpsLoc","token","jwt","sign","config","jwtSecret","findOneAndUpdateAsync","_id","$set","new","updatedUser","returnObj","success","message","data","jwtAccessToken","json","error","err123","INTERNAL_SERVER_ERROR","e","login","userObj","logout","undefined","console","log","findOneAndUpdate","userDoc","checkUser","foundUser","send","catch"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;;AAQA,SAASA,UAAT,CAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoC;AAClCC,iBAAWC,YAAX,CAAwB,EAAEC,OAAOL,IAAIM,IAAJ,CAASD,KAAlB,EAAyBE,KAAK,CAAC,EAAEC,UAAU,OAAZ,EAAD,EAAwB,EAAEA,UAAU,YAAZ,EAAxB,CAA9B,EAAxB,EAA6G,WAA7G,EACGC,IADH,CACQ,UAACC,IAAD,EAAU;AACd;AACA,QAAI,CAACA,IAAL,EAAW;AACT,UAAMC,MAAM,IAAIC,kBAAJ,CAAa,wCAAb,EAAuDC,qBAAWC,SAAlE,CAAZ;AACA,aAAOZ,KAAKS,GAAL,CAAP;AACD,KAHD,MAGO;AACLD,WAAKK,eAAL,CAAqBf,IAAIM,IAAJ,CAASU,QAA9B,EAAwC,UAACC,aAAD,EAAgBC,OAAhB,EAA4B;AAClE;AACA,YAAID,iBAAiB,CAACC,OAAtB,EAA+B;AAC7B,cAAMP,OAAM,IAAIC,kBAAJ,CAAa,oBAAb,EAAmCC,qBAAWM,YAA9C,CAAZ;AACA,iBAAOjB,KAAKS,IAAL,CAAP;AACD;AACDD,aAAKU,WAAL,GAAmB,IAAnB;AACAV,aAAKW,MAAL,GAAc,CAAC,iBAAD,EAAoB,iBAApB,CAAd;AACA,YAAMC,QAAQC,uBAAIC,IAAJ,CAASd,IAAT,EAAee,cAAOC,SAAtB,CAAd;AACAvB,uBAAWwB,qBAAX,CAAiC,EAAEC,KAAKlB,KAAKkB,GAAZ,EAAjC,EAAoD,EAAEC,MAAMnB,IAAR,EAApD,EAAoE,EAAEoB,KAAK,IAAP,EAApE,EAAmF;AAAnF,SACGrB,IADH,CACQ,UAACsB,WAAD,EAAiB;AACrB,cAAMC,YAAY;AAChBC,qBAAS,IADO;AAEhBC,qBAAS,6BAFO;AAGhBC,kBAAM;AACJC,uCAAuBd,KADnB;AAEJZ,oBAAMqB;AAFF;AAHU,WAAlB;AAQA9B,cAAIoC,IAAJ,CAASL,SAAT;AACD,SAXH,EAYGM,KAZH,CAYS,UAACC,MAAD,EAAY;AACjB,cAAM5B,MAAM,IAAIC,kBAAJ,iDAA2D2B,MAA3D,EAAqE1B,qBAAW2B,qBAAhF,CAAZ;AACAtC,eAAKS,GAAL;AACD,SAfH;AAgBD,OAzBD;AA0BD;AACF,GAlCH,EAmCG2B,KAnCH,CAmCS,UAACG,CAAD,EAAO;AACZ,QAAM9B,MAAM,IAAIC,kBAAJ,8BAAwC6B,CAAxC,EAA6C5B,qBAAW2B,qBAAxD,CAAZ;AACAtC,SAAKS,GAAL;AACD,GAtCH;AAuCD;;AAED,SAAS+B,KAAT,CAAe1C,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AAC7B,MAAMyC,UAAU;AACdtC,WAAOL,IAAIM,IAAJ,CAASD,KADF;AAEdG,cAAUR,IAAIM,IAAJ,CAASE;AAFL,GAAhB;;AAKAL,iBAAWC,YAAX,CAAwBuC,OAAxB,EAAiC,WAAjC,EACGlC,IADH,CACQ,UAACC,IAAD,EAAU;AACd;AACA,QAAI,CAACA,IAAL,EAAW;AACT,UAAMC,MAAM,IAAIC,kBAAJ,CAAa,wCAAb,EAAuDC,qBAAWC,SAAlE,CAAZ;AACA,aAAOZ,KAAKS,GAAL,CAAP;AACD,KAHD,MAGO;AACLD,WAAKK,eAAL,CAAqBf,IAAIM,IAAJ,CAASU,QAA9B,EAAwC,UAACC,aAAD,EAAgBC,OAAhB,EAA4B;AAClE;AACA,YAAID,iBAAiB,CAACC,OAAtB,EAA+B;AAC7B,cAAMP,QAAM,IAAIC,kBAAJ,CAAa,oBAAb,EAAmCC,qBAAWM,YAA9C,CAAZ;AACA,iBAAOjB,KAAKS,KAAL,CAAP;AACD;AACDD,aAAKU,WAAL,GAAmB,IAAnB;AACAV,aAAKW,MAAL,GAAc,CAAC,iBAAD,EAAoB,iBAApB,CAAd;AACA,YAAMC,QAAQC,uBAAIC,IAAJ,CAASd,IAAT,EAAee,cAAOC,SAAtB,CAAd;AACAvB,uBAAWwB,qBAAX,CAAiC,EAAEC,KAAKlB,KAAKkB,GAAZ,EAAjC,EAAoD,EAAEC,MAAMnB,IAAR,EAApD,EAAoE,EAAEoB,KAAK,IAAP,EAApE,EAAmF;AAAnF,SACGrB,IADH,CACQ,UAACsB,WAAD,EAAiB;AACrB,cAAMC,YAAY;AAChBC,qBAAS,IADO;AAEhBC,qBAAS,6BAFO;AAGhBC,kBAAM;AACJC,uCAAuBd,KADnB;AAEJZ,oBAAMqB;AAFF;AAHU,WAAlB;AAQA9B,cAAIoC,IAAJ,CAASL,SAAT;AACD,SAXH,EAYGM,KAZH,CAYS,UAACC,MAAD,EAAY;AACjB,cAAM5B,MAAM,IAAIC,kBAAJ,iDAA2D2B,MAA3D,EAAqE1B,qBAAW2B,qBAAhF,CAAZ;AACAtC,eAAKS,GAAL;AACD,SAfH;AAgBD,OAzBD;AA0BD;AACF,GAlCH,EAmCG2B,KAnCH,CAmCS,UAACG,CAAD,EAAO;AACZ,QAAM9B,MAAM,IAAIC,kBAAJ,8BAAwC6B,CAAxC,EAA6C5B,qBAAW2B,qBAAxD,CAAZ;AACAtC,SAAKS,GAAL;AACD,GAtCH;AAuCD;;AAED;;;;;;;AAOA,SAASiC,MAAT,CAAgB5C,GAAhB,EAAqBC,GAArB,EAA0BC,IAA1B,EAAgC;AAC9B,MAAMyC,UAAU3C,IAAIU,IAApB;AACA,MAAIiC,YAAYE,SAAZ,IAAyBF,YAAY,IAAzC,EAA+C;AAC7CG,YAAQC,GAAR,CAAY,sDAAZ,EAD6C,CACwB;AACtE;AACDJ,UAAQvB,WAAR,GAAsB,KAAtB;AACAjB,iBAAW6C,gBAAX,CAA4B,EAAEpB,KAAKe,QAAQf,GAAf,EAAoBR,aAAa,IAAjC,EAA5B,EAAqE,EAAES,MAAMc,OAAR,EAArE,EAAwF,EAAEb,KAAK,IAAP,EAAxF,EAAuG,UAACnB,GAAD,EAAMsC,OAAN,EAAkB;AACvH;AACA,QAAItC,GAAJ,EAAS;AACP,UAAM2B,QAAQ,IAAI1B,kBAAJ,CAAa,oCAAb,EAAmDC,qBAAW2B,qBAA9D,CAAd;AACAtC,WAAKoC,KAAL;AACD;AACD,QAAIW,OAAJ,EAAa;AACX,UAAMjB,YAAY;AAChBC,iBAAS,IADO;AAEhBC,iBAAS;AAFO,OAAlB;AAIAjC,UAAIoC,IAAJ,CAASL,SAAT;AACD,KAND,MAMO;AACL,UAAMM,SAAQ,IAAI1B,kBAAJ,CAAa,gBAAb,EAA+BC,qBAAWC,SAA1C,CAAd;AACAZ,WAAKoC,MAAL;AACD;AACF,GAhBD;AAiBD;AACD;AACA,SAASY,SAAT,CAAmBlD,GAAnB,EAAwBC,GAAxB,EAA6B;AAC3BE,iBAAWC,YAAX,CAAwB,EAAEC,OAAOL,IAAIM,IAAJ,CAASD,KAAlB,EAAxB,EACGI,IADH,CACQ,UAAC0C,SAAD,EAAe;AACnB,QAAIA,cAAc,IAAlB,EAAwB;AACtB,UAAMf,iBAAiBb,uBAAIC,IAAJ,CAAS2B,SAAT,EAAoB1B,cAAOC,SAA3B,CAAvB;AACA,UAAMM,YAAY;AAChBC,iBAAS,IADO;AAEhBC,iBAAS,YAFO;AAGhBC,cAAM;AAHU,OAAlB;AAKAH,gBAAUG,IAAV,GAAiB;AACfzB,cAAMyC,SADS;AAEff,iCAAuBA;AAFR,OAAjB;AAIA,aAAOnC,IAAImD,IAAJ,CAASpB,SAAT,CAAP;AACD,KAZD,MAYO;AACL,UAAMA,aAAY;AAChBC,iBAAS,IADO;AAEhBC,iBAAS;AAFO,OAAlB;AAIA,aAAOjC,IAAImD,IAAJ,CAASpB,UAAT,CAAP;AACD;AACF,GArBH,EAsBGqB,KAtBH,CAsBS,UAACf,KAAD,EAAW;AAChBQ,YAAQC,GAAR,CAAYT,KAAZ,EADgB,CACI;AACrB,GAxBH;AAyBD;;kBAEc;AACbI,cADa;AAEbE,gBAFa;AAGbM,sBAHa;AAIbnD;AAJa,C","file":"auth.js","sourceRoot":"../../../../.."}