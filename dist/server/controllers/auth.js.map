{"version":3,"sources":["server/controllers/auth.js"],"names":["loginadmin","req","res","next","findOneAsync","email","body","$or","userType","then","user","err","NOT_FOUND","comparePassword","password","passwordError","isMatch","UNAUTHORIZED","loginStatus","gpsLoc","token","sign","jwtSecret","findOneAndUpdateAsync","_id","$set","new","updatedUser","returnObj","success","message","data","jwtAccessToken","json","error","err123","INTERNAL_SERVER_ERROR","e","login","userObj","logout","undefined","console","log","findOneAndUpdate","userDoc","checkUser","foundUser","send","catch"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;;AAQA,SAASA,UAAT,CAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoC;AAClC,iBAAWC,YAAX,CAAwB,EAAEC,OAAOJ,IAAIK,IAAJ,CAASD,KAAlB,EAAyBE,KAAK,CAAC,EAAEC,UAAU,OAAZ,EAAD,EAAwB,EAAEA,UAAU,YAAZ,EAAxB,CAA9B,EAAxB,EAA6G,WAA7G,EACGC,IADH,CACQ,UAACC,IAAD,EAAU;AACd;AACA,QAAI,CAACA,IAAL,EAAW;AACT,UAAMC,MAAM,uBAAa,wCAAb,EAAuD,qBAAWC,SAAlE,CAAZ;AACA,aAAOT,KAAKQ,GAAL,CAAP;AACD,KAHD,MAGO;AACLD,WAAKG,eAAL,CAAqBZ,IAAIK,IAAJ,CAASQ,QAA9B,EAAwC,UAACC,aAAD,EAAgBC,OAAhB,EAA4B;AAClE;AACA,YAAID,iBAAiB,CAACC,OAAtB,EAA+B;AAC7B,cAAML,OAAM,uBAAa,oBAAb,EAAmC,qBAAWM,YAA9C,CAAZ;AACA,iBAAOd,KAAKQ,IAAL,CAAP;AACD;AACDD,aAAKQ,WAAL,GAAmB,IAAnB;AACAR,aAAKS,MAAL,GAAc,CAAC,iBAAD,EAAoB,iBAApB,CAAd;AACA,YAAMC,QAAQ,uBAAIC,IAAJ,CAASX,IAAT,EAAe,cAAOY,SAAtB,CAAd;AACA,uBAAWC,qBAAX,CAAiC,EAAEC,KAAKd,KAAKc,GAAZ,EAAjC,EAAoD,EAAEC,MAAMf,IAAR,EAApD,EAAoE,EAAEgB,KAAK,IAAP,EAApE,EAAmF;AAAnF,SACGjB,IADH,CACQ,UAACkB,WAAD,EAAiB;AACrB,cAAMC,YAAY;AAChBC,qBAAS,IADO;AAEhBC,qBAAS,6BAFO;AAGhBC,kBAAM;AACJC,uCAAuBZ,KADnB;AAEJV,oBAAMiB;AAFF;AAHU,WAAlB;AAQAzB,cAAI+B,IAAJ,CAASL,SAAT;AACD,SAXH,EAYGM,KAZH,CAYS,UAACC,MAAD,EAAY;AACjB,cAAMxB,MAAM,uEAA2DwB,MAA3D,EAAqE,qBAAWC,qBAAhF,CAAZ;AACAjC,eAAKQ,GAAL;AACD,SAfH;AAgBD,OAzBD;AA0BD;AACF,GAlCH,EAmCGuB,KAnCH,CAmCS,UAACG,CAAD,EAAO;AACZ,QAAM1B,MAAM,oDAAwC0B,CAAxC,EAA6C,qBAAWD,qBAAxD,CAAZ;AACAjC,SAAKQ,GAAL;AACD,GAtCH;AAuCD;;AAED,SAAS2B,KAAT,CAAerC,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AAC7B,MAAMoC,UAAU;AACdlC,WAAOJ,IAAIK,IAAJ,CAASD,KADF;AAEdG,cAAUP,IAAIK,IAAJ,CAASE;AAFL,GAAhB;;AAKA,iBAAWJ,YAAX,CAAwBmC,OAAxB,EAAiC,WAAjC,EACG9B,IADH,CACQ,UAACC,IAAD,EAAU;AACd;AACA,QAAI,CAACA,IAAL,EAAW;AACT,UAAMC,MAAM,uBAAa,wCAAb,EAAuD,qBAAWC,SAAlE,CAAZ;AACA,aAAOT,KAAKQ,GAAL,CAAP;AACD,KAHD,MAGO;AACLD,WAAKG,eAAL,CAAqBZ,IAAIK,IAAJ,CAASQ,QAA9B,EAAwC,UAACC,aAAD,EAAgBC,OAAhB,EAA4B;AAClE;AACA,YAAID,iBAAiB,CAACC,OAAtB,EAA+B;AAC7B,cAAML,QAAM,uBAAa,oBAAb,EAAmC,qBAAWM,YAA9C,CAAZ;AACA,iBAAOd,KAAKQ,KAAL,CAAP;AACD;AACDD,aAAKQ,WAAL,GAAmB,IAAnB;AACAR,aAAKS,MAAL,GAAc,CAAC,iBAAD,EAAoB,iBAApB,CAAd;AACA,YAAMC,QAAQ,uBAAIC,IAAJ,CAASX,IAAT,EAAe,cAAOY,SAAtB,CAAd;AACA,uBAAWC,qBAAX,CAAiC,EAAEC,KAAKd,KAAKc,GAAZ,EAAjC,EAAoD,EAAEC,MAAMf,IAAR,EAApD,EAAoE,EAAEgB,KAAK,IAAP,EAApE,EAAmF;AAAnF,SACGjB,IADH,CACQ,UAACkB,WAAD,EAAiB;AACrB,cAAMC,YAAY;AAChBC,qBAAS,IADO;AAEhBC,qBAAS,6BAFO;AAGhBC,kBAAM;AACJC,uCAAuBZ,KADnB;AAEJV,oBAAMiB;AAFF;AAHU,WAAlB;AAQAzB,cAAI+B,IAAJ,CAASL,SAAT;AACD,SAXH,EAYGM,KAZH,CAYS,UAACC,MAAD,EAAY;AACjB,cAAMxB,MAAM,uEAA2DwB,MAA3D,EAAqE,qBAAWC,qBAAhF,CAAZ;AACAjC,eAAKQ,GAAL;AACD,SAfH;AAgBD,OAzBD;AA0BD;AACF,GAlCH,EAmCGuB,KAnCH,CAmCS,UAACG,CAAD,EAAO;AACZ,QAAM1B,MAAM,oDAAwC0B,CAAxC,EAA6C,qBAAWD,qBAAxD,CAAZ;AACAjC,SAAKQ,GAAL;AACD,GAtCH;AAuCD;;AAED;;;;;;;AAOA,SAAS6B,MAAT,CAAgBvC,GAAhB,EAAqBC,GAArB,EAA0BC,IAA1B,EAAgC;AAC9B,MAAMoC,UAAUtC,IAAIS,IAApB;AACA,MAAI6B,YAAYE,SAAZ,IAAyBF,YAAY,IAAzC,EAA+C;AAC7CG,YAAQC,GAAR,CAAY,sDAAZ,EAD6C,CACwB;AACtE;AACDJ,UAAQrB,WAAR,GAAsB,KAAtB;AACA,iBAAW0B,gBAAX,CAA4B,EAAEpB,KAAKe,QAAQf,GAAf,EAAoBN,aAAa,IAAjC,EAA5B,EAAqE,EAAEO,MAAMc,OAAR,EAArE,EAAwF,EAAEb,KAAK,IAAP,EAAxF,EAAuG,UAACf,GAAD,EAAMkC,OAAN,EAAkB;AACvH;AACA,QAAIlC,GAAJ,EAAS;AACP,UAAMuB,QAAQ,uBAAa,oCAAb,EAAmD,qBAAWE,qBAA9D,CAAd;AACAjC,WAAK+B,KAAL;AACD;AACD,QAAIW,OAAJ,EAAa;AACX,UAAMjB,YAAY;AAChBC,iBAAS,IADO;AAEhBC,iBAAS;AAFO,OAAlB;AAIA5B,UAAI+B,IAAJ,CAASL,SAAT;AACD,KAND,MAMO;AACL,UAAMM,SAAQ,uBAAa,gBAAb,EAA+B,qBAAWtB,SAA1C,CAAd;AACAT,WAAK+B,MAAL;AACD;AACF,GAhBD;AAiBD;AACD;AACA,SAASY,SAAT,CAAmB7C,GAAnB,EAAwBC,GAAxB,EAA6B;AAC3B,iBAAWE,YAAX,CAAwB,EAAEC,OAAOJ,IAAIK,IAAJ,CAASD,KAAlB,EAAxB,EACGI,IADH,CACQ,UAACsC,SAAD,EAAe;AACnB,QAAIA,cAAc,IAAlB,EAAwB;AACtB,UAAMf,iBAAiB,uBAAIX,IAAJ,CAAS0B,SAAT,EAAoB,cAAOzB,SAA3B,CAAvB;AACA,UAAMM,YAAY;AAChBC,iBAAS,IADO;AAEhBC,iBAAS,YAFO;AAGhBC,cAAM;AAHU,OAAlB;AAKAH,gBAAUG,IAAV,GAAiB;AACfrB,cAAMqC,SADS;AAEff,iCAAuBA;AAFR,OAAjB;AAIA,aAAO9B,IAAI8C,IAAJ,CAASpB,SAAT,CAAP;AACD,KAZD,MAYO;AACL,UAAMA,aAAY;AAChBC,iBAAS,IADO;AAEhBC,iBAAS;AAFO,OAAlB;AAIA,aAAO5B,IAAI8C,IAAJ,CAASpB,UAAT,CAAP;AACD;AACF,GArBH,EAsBGqB,KAtBH,CAsBS,UAACf,KAAD,EAAW;AAChBQ,YAAQC,GAAR,CAAYT,KAAZ,EADgB,CACI;AACrB,GAxBH;AAyBD;;kBAEc;AACbI,cADa;AAEbE,gBAFa;AAGbM,sBAHa;AAIb9C;AAJa,C","file":"auth.js","sourceRoot":"../../../../.."}